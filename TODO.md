# 更好的对话功能
- [x] 模型ID修改：为了支持多个同名模型，计划给模型名加上「前缀」，例如oneapi渠道的gemini-2.5-flash模型实际id会是oneapi/gemini-2.5-flash；
- [x] 支持推理模型的思维过程显示
- [x] 更好的system prompt设定
    - [x] 原本的设计中，system prompt分为两类，一种是「默认级别」，一种是「简单级别」；但我认为现在的主流小模型的性能都已经完全足够使用默认级别的模型了，所以决定简化系统提示词设定，统一采用「默认级别」
- 更复杂、全面的模型参数设计，如给每一个模型自定义reasoning effort；可参考rikka hub的模型属性设置，每一个模型都可以自定义「输入模态」（纯文字还是文字+图像）和「能力」（如工具、推理）
**后来想了下，这个功能对于一个Obsidian ai插件来说相对不是那么有必要，暂时搁置。**

- [x] 可在设置里选择「侧边栏对话」是否自动添加当前编辑中的文件

# 更好的AI写作功能
- [x] AI续写
    - [x] 新的右键触发
      - [x] 在设置里新开一个一级分类标题，处理有关续写的各种选项，如选择续写模型（是侧边栏当前的模型还是固定指定模型）；
      - [x] 续写支持流式传输
      - [x] 选中部分段落，右键触发续写（选区续写）
    - [x] 增加新的续写触发机制：关键词触发，默认为双击空格
    - [x] 悬浮框：通过右键菜单触发悬浮框，可自定义续写的prompt
    - [x] 支持关键词触发悬浮框
    - [x] 更多可自定义属性
        - [x] 传递上下文机制需要进一步细化；可以选择部分上下文和默认传递全部上下文；如果是传递部分上下文，则要求用户用鼠标框选一定内容的文字内容，模型依据框选内容来进行续写。
        - [x] 在「设置」的续写分区里自定义默认的续写prompt；

- [x] AI改写
    AI改写主要由用户鼠标选定一定段落，然后通过默认的改写提示词或者用户自定义命令来进行AI改写。
    相关更改前后对比功能，可参照本插件已有的ai apply实现；




# 更好的RAG功能
- [x] 将原本的「包含模式」改为「手动选择文件夹」，支持添加/删除和拖动文件夹
    - [x] 优化文件夹的选择界面
- [x] 排除模式同样做类似改造
- [x] 想一个比较优雅的方式去解决「包含模式」和「排除模式」潜在的文件夹冲突问题


- [ ] 增加RAG进度栏，可以显示当前的RAG进度（如正在处理的文件夹，文件夹的进度，还有多少文件夹未处理，是否有文件夹内的文件在RAG后又更新了，需要重新RAG）
    看起来这部分RAG逻辑的修改比较复杂，原本插件的逻辑是，更改包含模式下的文件夹之后就需要重建整个库索引，代表之前的RAG时不看具体的文件的，一旦更改只能全量更新；**这部分逻辑较复杂，可能需要重构RAG系统**

    - [x] 修复「建立索引」中子母文件夹并列显示的问题
    - [x] 修复「包含模式」和「排除模式」的子母文件夹并列显示的问题；文件夹的选择/排除逻辑优化；样式优化
    - [x] 更新索引机制，支持自动更新索引；默认自动24小时会根据「已包含的文件夹」中的文件夹文件进行索引更新；

    - [ ] 记得做一下RAG的i18n

- [ ] 在侧边栏直接就vault进行提问的话，召回文本过长可能会很影响显示效果
- [ ] 测试RAG效果（不知道这个任务和增加RAG进度栏那个更优先，我倾向于先设定RAG进度栏）  


- [ ] 持续优化RAG效果
- [ ] 支持PDF、canvas的RAG
- [ ] 暴力模式：支持直接塞整个文件夹的上下文，让tokens飞起来！


# 正式改名、上线
- [ ] 改名、编写README与文档
- [ ] 视频

# 学习模式
- [ ] 对应的学习模式Agent
- [ ] 抽认卡：模型可制作抽认卡，并且可保存到本地的卡片库进行管理与复习


# AI知识库管理（远期）
能否由一个AI Agent来管理知识库？Agent会自动打标，自动移动/删除/润色文件。
like：yolo/composer/agent