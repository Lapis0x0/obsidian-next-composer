# 更好的对话功能
- [x] 模型ID修改：为了支持多个同名模型，计划给模型名加上「前缀」，例如oneapi渠道的gemini-2.5-flash模型实际id会是oneapi/gemini-2.5-flash；
- [x] 支持推理模型的思维过程显示
- [x] 更好的system prompt设定
    - [x] 原本的设计中，system prompt分为两类，一种是「默认级别」，一种是「简单级别」；但我认为现在的主流小模型的性能都已经完全足够使用默认级别的模型了，所以决定简化系统提示词设定，统一采用「默认级别」
- 更复杂、全面的模型参数设计，如给每一个模型自定义reasoning effort；可参考rikka hub的模型属性设置，每一个模型都可以自定义「输入模态」（纯文字还是文字+图像）和「能力」（如工具、推理）
**后来想了下，这个功能对于一个Obsidian ai插件来说相对不是那么有必要，暂时搁置。**

- [x] 可在设置里选择「侧边栏对话」是否自动添加当前编辑中的文件

# 更好的AI写作功能
- [x] AI续写
    - [x] 新的右键触发
      - [x] 在设置里新开一个一级分类标题，处理有关续写的各种选项，如选择续写模型（是侧边栏当前的模型还是固定指定模型）；
      - [x] 续写支持流式传输
      - [x] 选中部分段落，右键触发续写（选区续写）
    - [x] 增加新的续写触发机制：关键词触发，默认为双击空格
    - [x] 悬浮框：通过右键菜单触发悬浮框，可自定义续写的prompt
    - [x] 支持关键词触发悬浮框
    - [x] 更多可自定义属性
        - [x] 传递上下文机制需要进一步细化；可以选择部分上下文和默认传递全部上下文；如果是传递部分上下文，则要求用户用鼠标框选一定内容的文字内容，模型依据框选内容来进行续写。
        - [x] 在「设置」的续写分区里自定义默认的续写prompt；

- [x] AI改写
    AI改写主要由用户鼠标选定一定段落，然后通过默认的改写提示词或者用户自定义命令来进行AI改写。
    相关更改前后对比功能，可参照本插件已有的ai apply实现；




# 更好的RAG功能
- [x] 将原本的「包含模式」改为「手动选择文件夹」，支持添加/删除和拖动文件夹
    - [x] 优化文件夹的选择界面
- [x] 排除模式同样做类似改造
- [x] 想一个比较优雅的方式去解决「包含模式」和「排除模式」潜在的文件夹冲突问题


- [x] 增加RAG进度栏，可以显示当前的RAG进度（如正在处理的文件夹，文件夹的进度，还有多少文件夹未处理，是否有文件夹内的文件在RAG后又更新了，需要重新RAG）
    看起来这部分RAG逻辑的修改比较复杂，原本插件的逻辑是，更改包含模式下的文件夹之后就需要重建整个库索引，代表之前的RAG时不看具体的文件的，一旦更改只能全量更新；**这部分逻辑较复杂，可能需要重构RAG系统**

    - [x] 修复「建立索引」中子母文件夹并列显示的问题
    - [x] 修复「包含模式」和「排除模式」的子母文件夹并列显示的问题；文件夹的选择/排除逻辑优化；样式优化
    - [x] 更新索引机制，支持自动更新索引；默认自动24小时会根据「已包含的文件夹」中的文件夹文件进行索引更新；
    - [x] 记得做一下RAG的i18n

- [x] 在侧边栏直接就vault进行提问的话，召回文本过长可能会很影响显示效果，修改为引用片段默认折叠到两行
- [x] 测试RAG效果（不知道这个任务和增加RAG进度栏那个更优先，我倾向于先设定RAG进度栏）  

**1.0.0 版本正式发布**

---

## 1.1.0 更新计划
- [x] 渠道添加模型时支持自动获取模型列表
- [x] 修改悬浮栏键盘设定：shift+回车才是确认，回车是换行
- [x] esc键可以中断所有当前正在进行的ai续写/改写任务
- [x] 现在在执行续写任务时，传递的上下文中也会包含文章标题；放宽续写「无前文」判断；没有前文时，只要有自定义 prompt 或文件标题，继续生成；否则才提示 “No preceding content to continue.”。
- [x] 可以在设置的「聊天分区」里设置默认的对话上下文传递条数
    - [x] 「自定义助手」的助手里支持设定助手的上下文传递条数



## 1.2.0 更新计划
- [x] 根据Obsidian官方的审核要求做了大量的修改优化
- [x] 暴力模式：支持直接塞整个文件夹的上下文，让tokens飞起来！
- [x] 把侧边栏对话框右上角的prompt temple改成其他更有意义更优价值的功能区
    比如，这里可以更改「当前对话的文件传递方式」；可选是暴力塞上下文还是默认RAG
- [x] 砍掉：全局移除「模版」功能；建议使用自定义助手来进行功能替代
- [x] 学习模式：作为system prompt+自定义助手之外的附加提示词再包装；
    - [x] 如果选择开启学习模式，则会在下面出现一个编辑框，可以自定义学习模式的提示词，相关样式参考「默认续写系统提示词」
- [x] 优化右上角模式选择的样式设计；在点击选项或键盘回车选择时不再自动关闭，仅当点击弹层外部时关闭

## 1.2.0.1
- [x] 根据Obsidian的审核意见重新进行了大量修改

## 1.2.1
- [x] 修复「自动添加当前页面文件」的逻辑；
- [x] 「添加模型」的name和id现在采用更符合习惯的命名方式
- [ ] 支持「推理模型」可选推理强度；
    - [x] 将 @google/generative-ai 替换为 @google/genai；修复Gemini系列模型的推理预算设置无效的问题；现在所有供应商渠道的模型都可以自由选择推理模型类别，定义推理强度了
    - [x] 自动识别模型id，匹配gpt与Gemini系列模型关键词（如o3、o4mini、gpt5、gemini），自动设置对应的「推理类型」（gpt/gemini）；并根据推理类型显示不同的参数设置
    - [x] 「可用模型」应该放到「调用ID」上方；展示名称放在调用ID的下方；
- [x] 支持相同id的模型重复添加
    - [x]  隐去Model ID，原本的位置现在将展示「展示名称」；
    - [x]  侧边栏目前展示的仍然是ID，之前逻辑修改时这里忘迁移了，需要更改；

- [ ] 删除模型不需要重复确认

- [ ] Gemini渠道自动获取模型列表+获取思维链内容似乎有问题，需要修复；

- 在侧边对话栏增加设置栏
    推理深度可以自定义单个模型；但温度应该怎么取舍呢？
    温度、对话上下文设计我觉得放到侧边栏对话会更符合直觉；可以把当前添加的文档上下文「上移」到对话框上方，不占用对话框的空间；

- [ ] 针对Gemini模型，计划支持自带的「搜索」与「URL上下文」工具；并支持开启/关闭这两个工具；（这个确实只能支持Gemini渠道）


## 1.3.0 更新计划
- [ ] 记忆系统-针对Obsidian使用场景特化的记忆系统（毕竟应该没有人在Obsidian里和AI谈恋爱吧！）
- [ ] 持续优化RAG效果
- [ ] 支持PDF、canvas的RAG

## 1.4.0 更新计划
学习模式
- [ ] 对应的学习模式Agent 
- [ ] 抽认卡：模型可制作抽认卡，并且可保存到本地的卡片库进行管理与复习


## 1.5.0 YOLO模式前瞻与相关技术基座

如Agent任务编排；后台任务管理与调度；触发器等

## AI知识库管理与YOLO模式
能否由一个AI Agent来管理知识库？Agent会自动打标，自动移动/删除/润色文件。
like：yolo/composer/agent

## 2.0.0

未来：全新的logo与视觉设计

手机端与语音输入-记录优化；在yolo模式的基础上一键式管理用户的笔记；